<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://tbnpg.settlebank.co.kr/resources/js/SettlePG.js"></script>
    <title>커피와케이크</title>
</head>
<body>
    아메리카노(s)<input type="checkbox" onclick="" value="americano-s">
    아메리카노(m)<input type="checkbox" name="coffee" value="americano-m">
    <input type='button' onclick='requestCard()' value='카드예약'>
    <script src="/lib/js/jslib.js"></script>
 <script>
var itemArray;
window.onload=function(){
    
}
function buy() {
    makeItemCountOhter();
}
function makeItemCountOhter(){
    //var array=make2DArray(selectTime.length,2);
    //for(var i=0;i<array.length;i++){
        //array[i][0]=selectSeat;
       // array[i][1]=1;
    //}
    itemArray=[['americano-s',3],['americano-m',1]];

}
function requestCard() {
    buy();
    var requestUrl='http://localhost:8080/api/getSha256Hash';
    let data=JSON.stringify({
         "mchtId":"nxca_jt_il",
         "kind":"food",
         "method":"card",
         "productNameAndCount":itemArray
	});
	result=fisrtRequest(requestUrl,data);
    console.log(result);
    if(result.bool){
        var trdDt=result.trdDt;
        var trdTm=result.trdTm;
        var trdAmt=result.trdAmt;
        var mchtTrdNo=result.mchtTrdNo;
        var pktHash=result.pktHash;
        var itemName="americano-s";
        var mchtCustId=result.mchtCustId;
        card(trdDt,trdTm,mchtTrdNo,itemName,trdAmt,mchtCustId,pktHash);
    }else{
        alert(result.messege);
    }
    selectTime=[];
   
}
 </script>   
</body>
</html>